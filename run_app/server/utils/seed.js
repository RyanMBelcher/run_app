const connection = require('../config/connection');
const { User, GoalDefinition, Post, Goal } = require('../models');

connection.once('open', async () => {

    await User.deleteMany({});
    await Goal.deleteMany({});
    await GoalDefinition.deleteMany({});
    await Post.deleteMany({});

    const runnerBoi = await User.create({
        username: 'runner_boi',
        email: 'runner_boi@email.com',
        password: 'runner1234',
        location: 'Philadelphia, PA',
        bio: 'I love to run. Hit the follow button to keep up with my adventures!!'
    });

    const forrestGump = await User.create({
        username: 'runforrestrun',
        email: 'runforrestrun@email.com',
        password: 'ilovejenny',
        location: 'Greenbow, AL',
        bio: 'That day, for no particular reason, I decided to go for a little run...'
    });

    console.log('forestGump', forrestGump);

    const goalDef = await GoalDefinition.create({
        title: 'New Orleans to New York',
        start: [-90.07148, 29.95106],
        end: [-73.97105, 40.78298],
        coordinates: [
            [
                -90.07148,
                29.95106
            ],
            [
                -90.05284,
                29.98582
            ],
            [
                -90.01447,
                30.00797
            ],
            [
                -89.91553,
                30.08444
            ],
            [
                -89.80876,
                30.19639
            ],
            [
                -89.7474,
                30.2902
            ],
            [
                -89.73555,
                30.38371
            ],
            [
                -89.63129,
                30.57651
            ],
            [
                -89.53152,
                30.74221
            ],
            [
                -89.48976,
                30.8721
            ],
            [
                -89.4111,
                31.01544
            ],
            [
                -89.34835,
                31.1751
            ],
            [
                -89.32525,
                31.24328
            ],
            [
                -89.35228,
                31.31984
            ],
            [
                -89.31877,
                31.42829
            ],
            [
                -89.32354,
                31.48122
            ],
            [
                -89.28234,
                31.52542
            ],
            [
                -89.21733,
                31.60308
            ],
            [
                -89.15701,
                31.67613
            ],
            [
                -89.11707,
                31.69287
            ],
            [
                -89.09693,
                31.73071
            ],
            [
                -89.05551,
                31.78283
            ],
            [
                -89.03782,
                31.8851
            ],
            [
                -88.94481,
                31.99188
            ],
            [
                -88.89281,
                32.09498
            ],
            [
                -88.82444,
                32.2506
            ],
            [
                -88.79706,
                32.30925
            ],
            [
                -88.73905,
                32.35059
            ],
            [
                -88.56063,
                32.40144
            ],
            [
                -88.46244,
                32.41315
            ],
            [
                -88.36603,
                32.47065
            ],
            [
                -88.223,
                32.5971
            ],
            [
                -88.05923,
                32.7719
            ],
            [
                -87.87554,
                32.91007
            ],
            [
                -87.61204,
                33.14804
            ],
            [
                -87.47705,
                33.17449
            ],
            [
                -87.27318,
                33.1875
            ],
            [
                -87.14423,
                33.24644
            ],
            [
                -87.0623,
                33.3093
            ],
            [
                -86.96517,
                33.4141
            ],
            [
                -86.94438,
                33.46079
            ],
            [
                -86.89285,
                33.50243
            ],
            [
                -86.80327,
                33.5293
            ],
            [
                -86.75505,
                33.54384
            ],
            [
                -86.71756,
                33.5728
            ],
            [
                -86.67291,
                33.58589
            ],
            [
                -86.62751,
                33.63034
            ],
            [
                -86.55118,
                33.66996
            ],
            [
                -86.50482,
                33.72459
            ],
            [
                -86.47373,
                33.76021
            ],
            [
                -86.41586,
                33.78015
            ],
            [
                -86.28374,
                33.86397
            ],
            [
                -86.21898,
                33.9126
            ],
            [
                -86.07436,
                34.01438
            ],
            [
                -86.01841,
                34.08243
            ],
            [
                -85.98981,
                34.11205
            ],
            [
                -85.99128,
                34.13766
            ],
            [
                -85.92617,
                34.21812
            ],
            [
                -85.869,
                34.28996
            ],
            [
                -85.78598,
                34.39522
            ],
            [
                -85.72799,
                34.45917
            ],
            [
                -85.68754,
                34.54146
            ],
            [
                -85.65178,
                34.58218
            ],
            [
                -85.57162,
                34.69383
            ],
            [
                -85.53888,
                34.76943
            ],
            [
                -85.5313,
                34.84248
            ],
            [
                -85.49708,
                34.89718
            ],
            [
                -85.47788,
                34.94047
            ],
            [
                -85.43,
                34.96822
            ],
            [
                -85.3885,
                35.01258
            ],
            [
                -85.35627,
                35.02912
            ],
            [
                -85.32473,
                35.02428
            ],
            [
                -85.25028,
                35.0134
            ],
            [
                -85.18365,
                35.01294
            ],
            [
                -85.07972,
                35.08234
            ],
            [
                -85.00025,
                35.13271
            ],
            [
                -84.93902,
                35.15758
            ],
            [
                -84.86253,
                35.21821
            ],
            [
                -84.80397,
                35.3123
            ],
            [
                -84.73226,
                35.3755
            ],
            [
                -84.65212,
                35.46221
            ],
            [
                -84.48731,
                35.62638
            ],
            [
                -84.38495,
                35.74325
            ],
            [
                -84.2919,
                35.81895
            ],
            [
                -84.25647,
                35.86719
            ],
            [
                -84.3241,
                35.87696
            ],
            [
                -84.34179,
                35.93961
            ],
            [
                -84.36274,
                35.94803
            ],
            [
                -84.33961,
                35.9739
            ],
            [
                -84.2728,
                36.00892
            ],
            [
                -84.21596,
                35.98771
            ],
            [
                -84.17652,
                35.96831
            ],
            [
                -84.13611,
                35.92731
            ],
            [
                -84.09659,
                35.91675
            ],
            [
                -83.96531,
                35.95896
            ],
            [
                -83.85537,
                36.01316
            ],
            [
                -83.68692,
                35.99595
            ],
            [
                -83.59972,
                35.98437
            ],
            [
                -83.55205,
                35.99887
            ],
            [
                -83.40925,
                36.05443
            ],
            [
                -83.34443,
                36.10038
            ],
            [
                -83.20876,
                36.17394
            ],
            [
                -83.02553,
                36.22913
            ],
            [
                -82.78726,
                36.34419
            ],
            [
                -82.68263,
                36.36636
            ],
            [
                -82.60138,
                36.40759
            ],
            [
                -82.42454,
                36.50918
            ],
            [
                -82.26975,
                36.58185
            ],
            [
                -82.05818,
                36.66661
            ],
            [
                -81.8992,
                36.73765
            ],
            [
                -81.65736,
                36.80945
            ],
            [
                -81.55294,
                36.81813
            ],
            [
                -81.47468,
                36.85158
            ],
            [
                -81.23515,
                36.92036
            ],
            [
                -81.12948,
                36.95067
            ],
            [
                -81.08006,
                36.96541
            ],
            [
                -81.04948,
                36.94633
            ],
            [
                -80.92216,
                36.94827
            ],
            [
                -80.84036,
                36.97596
            ],
            [
                -80.7599,
                37.00334
            ],
            [
                -80.71498,
                37.04783
            ],
            [
                -80.67704,
                37.07963
            ],
            [
                -80.61895,
                37.08658
            ],
            [
                -80.52801,
                37.09856
            ],
            [
                -80.41192,
                37.11799
            ],
            [
                -80.32152,
                37.16159
            ],
            [
                -80.21363,
                37.24223
            ],
            [
                -80.09829,
                37.29377
            ],
            [
                -79.92631,
                37.36601
            ],
            [
                -79.87697,
                37.42702
            ],
            [
                -79.75263,
                37.49696
            ],
            [
                -79.66601,
                37.54879
            ],
            [
                -79.58289,
                37.62469
            ],
            [
                -79.44296,
                37.71829
            ],
            [
                -79.41484,
                37.74973
            ],
            [
                -79.40621,
                37.76362
            ],
            [
                -79.38372,
                37.81417
            ],
            [
                -79.33796,
                37.8643
            ],
            [
                -79.26149,
                37.90732
            ],
            [
                -79.18451,
                37.97874
            ],
            [
                -79.06888,
                38.10099
            ],
            [
                -79.01003,
                38.16657
            ],
            [
                -78.96056,
                38.2433
            ],
            [
                -78.93111,
                38.2949
            ],
            [
                -78.91345,
                38.39101
            ],
            [
                -78.78865,
                38.50443
            ],
            [
                -78.69156,
                38.63163
            ],
            [
                -78.65419,
                38.69519
            ],
            [
                -78.65044,
                38.73516
            ],
            [
                -78.61928,
                38.77457
            ],
            [
                -78.54154,
                38.85224
            ],
            [
                -78.50276,
                38.90474
            ],
            [
                -78.39738,
                38.99613
            ],
            [
                -78.33304,
                39.0074
            ],
            [
                -78.2573,
                38.99515
            ],
            [
                -78.158,
                38.94766
            ],
            [
                -78.12653,
                38.92135
            ],
            [
                -78.0895,
                38.91278
            ],
            [
                -78.01144,
                38.90637
            ],
            [
                -77.94095,
                38.90257
            ],
            [
                -77.86325,
                38.8579
            ],
            [
                -77.76422,
                38.84737
            ],
            [
                -77.68988,
                38.82249
            ],
            [
                -77.53066,
                38.80043
            ],
            [
                -77.44201,
                38.84201
            ],
            [
                -77.24238,
                38.87956
            ],
            [
                -77.21654,
                38.90522
            ],
            [
                -77.20302,
                38.94461
            ],
            [
                -77.15792,
                38.9981
            ],
            [
                -77.09247,
                39.01158
            ],
            [
                -77.02488,
                39.01682
            ],
            [
                -76.95123,
                39.0183
            ],
            [
                -76.91166,
                39.06494
            ],
            [
                -76.86291,
                39.12843
            ],
            [
                -76.77837,
                39.18499
            ],
            [
                -76.72313,
                39.2208
            ],
            [
                -76.63197,
                39.22884
            ],
            [
                -76.55849,
                39.26828
            ],
            [
                -76.5124,
                39.34269
            ],
            [
                -76.42689,
                39.40044
            ],
            [
                -76.34314,
                39.44214
            ],
            [
                -76.22764,
                39.49965
            ],
            [
                -76.13229,
                39.57487
            ],
            [
                -75.90791,
                39.64118
            ],
            [
                -75.78426,
                39.63905
            ],
            [
                -75.68414,
                39.66721
            ],
            [
                -75.58237,
                39.71652
            ],
            [
                -75.52715,
                39.77499
            ],
            [
                -75.39134,
                39.84565
            ],
            [
                -75.2123,
                39.88575
            ],
            [
                -75.15174,
                39.90172
            ],
            [
                -75.14256,
                39.94443
            ],
            [
                -75.16393,
                39.95917
            ],
            [
                -75.14113,
                39.95702
            ],
            [
                -75.05139,
                40.01633
            ],
            [
                -74.98091,
                40.05862
            ],
            [
                -74.8891,
                40.11514
            ],
            [
                -74.85253,
                40.12319
            ],
            [
                -74.80183,
                40.10762
            ],
            [
                -74.73333,
                40.0972
            ],
            [
                -74.69013,
                40.13219
            ],
            [
                -74.52205,
                40.24527
            ],
            [
                -74.39237,
                40.49166
            ],
            [
                -74.25264,
                40.5702
            ],
            [
                -74.18486,
                40.66146
            ],
            [
                -74.11405,
                40.75177
            ],
            [
                -74.04261,
                40.77651
            ],
            [
                -74.02447,
                40.7632
            ],
            [
                -73.98644,
                40.772
            ],
            [
                -73.97105,
                40.78298
            ]
        ],
        distance: 1294.94
    });

    const goal1 = await Goal.create({
        startDate: new Date(),
        endDate: null,
        status: 'in progress',
        currentLocation: [-89.15701, 31.67613],
        currentDistance: 250,
        username: 'runner_boi',
        goalDefId: goalDef._id

    });

    const goal2 = await Goal.create({
        startDate: new Date(),
        endDate: null,
        status: 'in progress',
        currentLocation: [-77.94095, 38.90257],
        currentDistance: 1230,
        username: 'runforrestrun',
        goalDefId: goalDef._id
    });

    const runnerBoiGoal = await Goal.find({ username: 'runner_boi' });
    const forrestGumpGoal = await Goal.find({ username: 'runforrestrun' });

    const post1 = await Post.create({
        title: 'Monday Runday',
        description: 'What a beautiful day for a run',
        distance: 10,
        username: 'runner_boi',
        goalId: runnerBoiGoal[0]._id,
        userId: runnerBoi._id
    });

    const post2 = await Post.create({
        title: 'Long run day',
        description: 'Got to get the long runs in',
        distance: 20,
        username: 'runner_boi',
        goalId: runnerBoiGoal[0]._id,
        userId: runnerBoi._id
    });

    const post3 = await Post.create({
        title: 'Big day, Big miles',
        description: 'I am going to see Lt. Dan!!!',
        distance: 55,
        username: 'runforrestrun',
        goalId: forrestGumpGoal[0]._id,
        userId: forrestGump._id
    });

    const runnerBoiPosts = await Post.find({ username: 'runner_boi' });
    const forrestGumpPosts = await Post.find({ username: 'runforrestrun' });

    await User.findOneAndUpdate(
        { username: 'runner_boi' },
        {
            $push: {
                goals: [runnerBoiGoal[0]._id],
                posts: [runnerBoiPosts[0]._id, runnerBoiPosts[1]._id]
            }
        },
        { new: true }
    );
    await User.findOneAndUpdate(
        { username: 'runforrestrun' },
        {
            $push: {
                goals: [forrestGumpGoal[0]._id],
                posts: [forrestGumpPosts[0]._id]
            }
        },
        { new: true }
    );

    process.exit(0);
});