import React, { useState, useEffect } from 'react';
import mapboxgl from 'mapbox-gl';
import { Box } from '@chakra-ui/react'


export default function Map() {
    const [loaded, setLoaded] = useState(false);

    useEffect(() => {
        setLoaded(true);
    }, [])

    useEffect(() => {
        if (loaded) {
            let map = new mapboxgl.Map({
                container: 'map',
                center: [- 90.0715, 29.9511],
                zoom: 3,
                style: 'mapbox://styles/rbelcher86/clf4ixsl1006o01qkcxzpffm0',
                accessToken: 'pk.eyJ1IjoicmJlbGNoZXI4NiIsImEiOiJjbGYxOXBtMzkwMXE3M3dxa3FnMmI5dXd4In0.RSfTXdlifISPOcZ5xO5ucg'
            });

            map.addControl(
                new mapboxgl.NavigationControl());

            const marker1 = new mapboxgl.Marker({ color: '#0B515B' })
                .setLngLat([-90.07148, 29.95106])
                .addTo(map);

            const marker2 = new mapboxgl.Marker({ color: '#0B515B' })
                .setLngLat([-73.97105, 40.78298])
                .addTo(map);

            map.on('load', () => {
                map.addSource('route', {
                    'type': 'geojson',
                    'data': {
                        "type": "FeatureCollection",
                        "features": [
                            {
                                "type": "Feature",
                                "properties": {
                                    "stroke": "#ff1800"
                                },
                                "geometry": {
                                    "type": "LineString",
                                    "coordinates": [
                                        [
                                            -90.07148,
                                            29.95106
                                        ],
                                        [
                                            -90.05284,
                                            29.98582
                                        ],
                                        [
                                            -90.01447,
                                            30.00797
                                        ],
                                        [
                                            -89.91553,
                                            30.08444
                                        ],
                                        [
                                            -89.80876,
                                            30.19639
                                        ],
                                        [
                                            -89.74722,
                                            30.29069
                                        ],
                                        [
                                            -89.73508,
                                            30.38434
                                        ],
                                        [
                                            -89.63096,
                                            30.57711
                                        ],
                                        [
                                            -89.53152,
                                            30.74221
                                        ],
                                        [
                                            -89.48976,
                                            30.8721
                                        ],
                                        [
                                            -89.4111,
                                            31.01544
                                        ],
                                        [
                                            -89.34835,
                                            31.1751
                                        ],
                                        [
                                            -89.32525,
                                            31.24328
                                        ],
                                        [
                                            -89.35228,
                                            31.31984
                                        ],
                                        [
                                            -89.31877,
                                            31.42829
                                        ],
                                        [
                                            -89.32354,
                                            31.48122
                                        ],
                                        [
                                            -89.28234,
                                            31.52542
                                        ],
                                        [
                                            -89.21733,
                                            31.60308
                                        ],
                                        [
                                            -89.15701,
                                            31.67613
                                        ],
                                        [
                                            -89.11707,
                                            31.69287
                                        ],
                                        [
                                            -89.09693,
                                            31.73071
                                        ],
                                        [
                                            -89.05532,
                                            31.78431
                                        ],
                                        [
                                            -89.03713,
                                            31.88606
                                        ],
                                        [
                                            -88.94422,
                                            31.99261
                                        ],
                                        [
                                            -88.89274,
                                            32.09526
                                        ],
                                        [
                                            -88.82417,
                                            32.25119
                                        ],
                                        [
                                            -88.79669,
                                            32.30954
                                        ],
                                        [
                                            -88.73868,
                                            32.3505
                                        ],
                                        [
                                            -88.55949,
                                            32.40179
                                        ],
                                        [
                                            -88.46201,
                                            32.41337
                                        ],
                                        [
                                            -88.36565,
                                            32.47096
                                        ],
                                        [
                                            -88.22283,
                                            32.59739
                                        ],
                                        [
                                            -88.16203,
                                            32.68256
                                        ],
                                        [
                                            -88.05882,
                                            32.77228
                                        ],
                                        [
                                            -87.87517,
                                            32.91038
                                        ],
                                        [
                                            -87.61167,
                                            33.14817
                                        ],
                                        [
                                            -87.47516,
                                            33.17417
                                        ],
                                        [
                                            -87.27209,
                                            33.18768
                                        ],
                                        [
                                            -87.14354,
                                            33.24677
                                        ],
                                        [
                                            -87.06098,
                                            33.31047
                                        ],
                                        [
                                            -86.96479,
                                            33.41443
                                        ],
                                        [
                                            -86.9437,
                                            33.46129
                                        ],
                                        [
                                            -86.89169,
                                            33.50327
                                        ],
                                        [
                                            -86.80293,
                                            33.52954
                                        ],
                                        [
                                            -86.75403,
                                            33.54409
                                        ],
                                        [
                                            -86.71696,
                                            33.57373
                                        ],
                                        [
                                            -86.67202,
                                            33.58617
                                        ],
                                        [
                                            -86.62703,
                                            33.63087
                                        ],
                                        [
                                            -86.55052,
                                            33.67044
                                        ],
                                        [
                                            -86.50322,
                                            33.7254
                                        ],
                                        [
                                            -86.47299,
                                            33.76094
                                        ],
                                        [
                                            -86.41373,
                                            33.78067
                                        ],
                                        [
                                            -86.28298,
                                            33.86435
                                        ],
                                        [
                                            -86.21827,
                                            33.91338
                                        ],
                                        [
                                            -86.13116,
                                            33.9611
                                        ],
                                        [
                                            -86.07434,
                                            34.0159
                                        ],
                                        [
                                            -86.01575,
                                            34.08525
                                        ],
                                        [
                                            -85.98882,
                                            34.11309
                                        ],
                                        [
                                            -85.99132,
                                            34.13914
                                        ],
                                        [
                                            -85.92337,
                                            34.22038
                                        ],
                                        [
                                            -85.86815,
                                            34.29093
                                        ],
                                        [
                                            -85.78523,
                                            34.39635
                                        ],
                                        [
                                            -85.72224,
                                            34.46574
                                        ],
                                        [
                                            -85.68592,
                                            34.54402
                                        ],
                                        [
                                            -85.64802,
                                            34.58618
                                        ],
                                        [
                                            -85.56945,
                                            34.69616
                                        ],
                                        [
                                            -85.53973,
                                            34.77118
                                        ],
                                        [
                                            -85.53005,
                                            34.84505
                                        ],
                                        [
                                            -85.49595,
                                            34.8988
                                        ],
                                        [
                                            -85.47658,
                                            34.94156
                                        ],
                                        [
                                            -85.42783,
                                            34.96871
                                        ],
                                        [
                                            -85.38764,
                                            35.01407
                                        ],
                                        [
                                            -85.354,
                                            35.02915
                                        ],
                                        [
                                            -85.32286,
                                            35.02816
                                        ],
                                        [
                                            -85.24733,
                                            35.01224
                                        ],
                                        [
                                            -85.18123,
                                            35.01448
                                        ],
                                        [
                                            -84.99703,
                                            35.13504
                                        ],
                                        [
                                            -84.93465,
                                            35.16121
                                        ],
                                        [
                                            -84.86102,
                                            35.22031
                                        ],
                                        [
                                            -84.80174,
                                            35.31407
                                        ],
                                        [
                                            -84.7497,
                                            35.34513
                                        ],
                                        [
                                            -84.72929,
                                            35.37936
                                        ],
                                        [
                                            -84.65003,
                                            35.46428
                                        ],
                                        [
                                            -84.48483,
                                            35.62835
                                        ],
                                        [
                                            -84.38343,
                                            35.7452
                                        ],
                                        [
                                            -84.28299,
                                            35.82577
                                        ],
                                        [
                                            -84.31364,
                                            35.8429
                                        ],
                                        [
                                            -84.3241,
                                            35.87693
                                        ],
                                        [
                                            -84.33271,
                                            35.91449
                                        ],
                                        [
                                            -84.34173,
                                            35.93954
                                        ],
                                        [
                                            -84.36273,
                                            35.94802
                                        ],
                                        [
                                            -84.33996,
                                            35.97361
                                        ],
                                        [
                                            -84.27418,
                                            36.00833
                                        ],
                                        [
                                            -84.21614,
                                            35.98783
                                        ],
                                        [
                                            -84.17655,
                                            35.9684
                                        ],
                                        [
                                            -84.13614,
                                            35.92734
                                        ],
                                        [
                                            -84.09683,
                                            35.9167
                                        ],
                                        [
                                            -84.01419,
                                            35.93545
                                        ],
                                        [
                                            -83.91801,
                                            35.97737
                                        ],
                                        [
                                            -83.85557,
                                            36.01319
                                        ],
                                        [
                                            -83.77732,
                                            36.00271
                                        ],
                                        [
                                            -83.59995,
                                            35.98435
                                        ],
                                        [
                                            -83.45808,
                                            36.03014
                                        ],
                                        [
                                            -83.31801,
                                            36.12508
                                        ],
                                        [
                                            -83.1778,
                                            36.19191
                                        ],
                                        [
                                            -82.95704,
                                            36.25649
                                        ],
                                        [
                                            -82.74508,
                                            36.35393
                                        ],
                                        [
                                            -82.68178,
                                            36.36692
                                        ],
                                        [
                                            -82.64536,
                                            36.40241
                                        ],
                                        [
                                            -82.5582,
                                            36.43849
                                        ],
                                        [
                                            -82.38092,
                                            36.53684
                                        ],
                                        [
                                            -82.21819,
                                            36.60685
                                        ],
                                        [
                                            -82.08827,
                                            36.64745
                                        ],
                                        [
                                            -82.01859,
                                            36.69104
                                        ],
                                        [
                                            -81.95272,
                                            36.7058
                                        ],
                                        [
                                            -81.85121,
                                            36.75929
                                        ],
                                        [
                                            -81.6908,
                                            36.78731
                                        ],
                                        [
                                            -81.59793,
                                            36.81285
                                        ],
                                        [
                                            -81.50015,
                                            36.83305
                                        ],
                                        [
                                            -81.41743,
                                            36.86583
                                        ],
                                        [
                                            -81.16032,
                                            36.93716
                                        ],
                                        [
                                            -81.07887,
                                            36.96559
                                        ],
                                        [
                                            -80.99073,
                                            36.93701
                                        ],
                                        [
                                            -80.86461,
                                            36.95417
                                        ],
                                        [
                                            -80.79651,
                                            36.99238
                                        ],
                                        [
                                            -80.73008,
                                            37.02416
                                        ],
                                        [
                                            -80.71372,
                                            37.05117
                                        ],
                                        [
                                            -80.6699,
                                            37.07932
                                        ],
                                        [
                                            -80.55913,
                                            37.09809
                                        ],
                                        [
                                            -80.47583,
                                            37.09613
                                        ],
                                        [
                                            -80.2821,
                                            37.18691
                                        ],
                                        [
                                            -80.23925,
                                            37.23109
                                        ],
                                        [
                                            -80.18397,
                                            37.25104
                                        ],
                                        [
                                            -80.0499,
                                            37.31688
                                        ],
                                        [
                                            -79.95827,
                                            37.36099
                                        ],
                                        [
                                            -79.8999,
                                            37.39678
                                        ],
                                        [
                                            -79.81895,
                                            37.46426
                                        ],
                                        [
                                            -79.70438,
                                            37.52539
                                        ],
                                        [
                                            -79.55007,
                                            37.65128
                                        ],
                                        [
                                            -79.41715,
                                            37.74686
                                        ],
                                        [
                                            -79.39108,
                                            37.80193
                                        ],
                                        [
                                            -79.36917,
                                            37.83558
                                        ],
                                        [
                                            -79.29664,
                                            37.88036
                                        ],
                                        [
                                            -79.19605,
                                            37.96759
                                        ],
                                        [
                                            -79.13742,
                                            38.02683
                                        ],
                                        [
                                            -79.02552,
                                            38.13595
                                        ],
                                        [
                                            -78.93572,
                                            38.27902
                                        ],
                                        [
                                            -78.91946,
                                            38.37122
                                        ],
                                        [
                                            -78.86719,
                                            38.43465
                                        ],
                                        [
                                            -78.80163,
                                            38.49296
                                        ],
                                        [
                                            -78.74845,
                                            38.55512
                                        ],
                                        [
                                            -78.66157,
                                            38.67473
                                        ],
                                        [
                                            -78.64258,
                                            38.75523
                                        ],
                                        [
                                            -78.5678,
                                            38.83591
                                        ],
                                        [
                                            -78.46365,
                                            38.9446
                                        ],
                                        [
                                            -78.34899,
                                            39.01363
                                        ],
                                        [
                                            -78.28252,
                                            39.00082
                                        ],
                                        [
                                            -78.17856,
                                            38.95199
                                        ],
                                        [
                                            -78.11048,
                                            38.91715
                                        ],
                                        [
                                            -78.03137,
                                            38.90839
                                        ],
                                        [
                                            -77.95877,
                                            38.90812
                                        ],
                                        [
                                            -77.8935,
                                            38.8713
                                        ],
                                        [
                                            -77.71006,
                                            38.82378
                                        ],
                                        [
                                            -77.58823,
                                            38.79807
                                        ],
                                        [
                                            -77.45991,
                                            38.82361
                                        ],
                                        [
                                            -77.37404,
                                            38.8569
                                        ],
                                        [
                                            -77.29031,
                                            38.87252
                                        ],
                                        [
                                            -77.21748,
                                            38.8904
                                        ],
                                        [
                                            -77.21648,
                                            38.91995
                                        ],
                                        [
                                            -77.16871,
                                            38.98256
                                        ],
                                        [
                                            -77.151,
                                            39.01003
                                        ],
                                        [
                                            -77.10686,
                                            39.01876
                                        ],
                                        [
                                            -77.04088,
                                            39.01329
                                        ],
                                        [
                                            -76.97142,
                                            39.01834
                                        ],
                                        [
                                            -76.92552,
                                            39.05841
                                        ],
                                        [
                                            -76.87795,
                                            39.11107
                                        ],
                                        [
                                            -76.74046,
                                            39.21072
                                        ],
                                        [
                                            -76.57715,
                                            39.2453
                                        ],
                                        [
                                            -76.52991,
                                            39.32203
                                        ],
                                        [
                                            -76.44763,
                                            39.37988
                                        ],
                                        [
                                            -76.3732,
                                            39.43912
                                        ],
                                        [
                                            -76.25245,
                                            39.48373
                                        ],
                                        [
                                            -76.15824,
                                            39.55353
                                        ],
                                        [
                                            -76.04553,
                                            39.5999
                                        ],
                                        [
                                            -75.94253,
                                            39.63945
                                        ],
                                        [
                                            -75.81593,
                                            39.64237
                                        ],
                                        [
                                            -75.69583,
                                            39.65877
                                        ],
                                        [
                                            -75.59601,
                                            39.70137
                                        ],
                                        [
                                            -75.53667,
                                            39.76803
                                        ],
                                        [
                                            -75.47482,
                                            39.80439
                                        ],
                                        [
                                            -75.31077,
                                            39.86843
                                        ],
                                        [
                                            -75.22777,
                                            39.89295
                                        ],
                                        [
                                            -75.17446,
                                            39.89901
                                        ],
                                        [
                                            -75.14731,
                                            39.92365
                                        ],
                                        [
                                            -75.15462,
                                            39.95684
                                        ],
                                        [
                                            -75.07489,
                                            40.00578
                                        ],
                                        [
                                            -74.89813,
                                            40.1053
                                        ],
                                        [
                                            -74.87917,
                                            40.12743
                                        ],
                                        [
                                            -74.82395,
                                            40.11517
                                        ],
                                        [
                                            -74.76343,
                                            40.09436
                                        ],
                                        [
                                            -74.71301,
                                            40.11352
                                        ],
                                        [
                                            -74.54855,
                                            40.22947
                                        ],
                                        [
                                            -74.4896,
                                            40.31386
                                        ],
                                        [
                                            -74.45235,
                                            40.40117
                                        ],
                                        [
                                            -74.40785,
                                            40.47421
                                        ],
                                        [
                                            -74.26909,
                                            40.5543
                                        ],
                                        [
                                            -74.12349,
                                            40.73549
                                        ],
                                        [
                                            -74.05127,
                                            40.77967
                                        ],
                                        [
                                            -73.99673,
                                            40.75703
                                        ],
                                        [
                                            -73.97105,
                                            40.78298
                                        ]
                                    ]
                                }
                            }
                        ]
                    }
                });
                map.addLayer({
                    'id': 'route',
                    'type': 'line',
                    'source': 'route',
                    'layout': {
                        'line-join': 'round',
                        'line-cap': 'round'
                    },
                    'paint': {
                        'line-color': '#888',
                        'line-width': 8
                    }
                });
            });
        }
    }, [loaded]);

    return (
        <Box id='map' class="map-container" w="100%" h="100%"></Box>
    )
}

